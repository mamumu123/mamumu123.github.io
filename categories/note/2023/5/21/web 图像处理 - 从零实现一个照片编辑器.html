<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>web å›¾åƒå¤„ç† - ä»é›¶å®ç°ä¸€ä¸ªç…§ç‰‡ç¼–è¾‘å™¨ | çŸ¥è¯†åº“</title>
    <meta name="description" content="ä¸ªäººæŠ€æœ¯çŸ¥è¯†åº“ï¼Œè®°å½• & åˆ†äº«ä¸ªäººç¢ç‰‡åŒ–ã€ç»“æ„åŒ–ã€ä½“ç³»åŒ–çš„æŠ€æœ¯çŸ¥è¯†å†…å®¹ã€‚">
    <meta name="generator" content="VitePress v1.1.3">
    <link rel="preload stylesheet" href="/assets/style.DiEhB_17.css" as="style">
    
    <script type="module" src="/assets/app.DGcuL-fu.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.BS8ZOoZE.js">
    <link rel="modulepreload" href="/assets/chunks/theme.o2qolyM6.js">
    <link rel="modulepreload" href="/assets/chunks/ArticleMetadata.Bk0guVEf.js">
    <link rel="modulepreload" href="/assets/categories_note_2023_5_21_web å›¾åƒå¤„ç† - ä»é›¶å®ç°ä¸€ä¸ªç…§ç‰‡ç¼–è¾‘å™¨.md.BOZwX2FR.lean.js">
    <link rel="icon" href="/favicon.ico">
    <meta name="author" content="Charles7c">
    <meta name="keywords" content="çŸ¥è¯†åº“, çŸ¥è¯†åº“, åšå®¢, Charles7c">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="theme-color" content="#3c8772">
    <meta name="referrer" content="no-referrer">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="zh_CN">
    <meta property="og:title" content="çŸ¥è¯†åº“">
    <meta property="og:description" content="ä¸ªäººæŠ€æœ¯çŸ¥è¯†åº“ï¼Œè®°å½• &amp; åˆ†äº«ä¸ªäººç¢ç‰‡åŒ–ã€ç»“æ„åŒ–ã€ä½“ç³»åŒ–çš„æŠ€æœ¯çŸ¥è¯†å†…å®¹ã€‚">
    <meta property="og:site" content="https://blog.charles7c.top">
    <meta property="og:site_name" content="çŸ¥è¯†åº“">
    <meta property="og:image" content="https://blog.charles7c.top/logo.jpg">
    <script>var _hmt=_hmt||[];(function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?53af4b1a12fbe40810ca7ad39f8db9c7";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)})();</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-9a9b3e71><!--[--><!--]--><!--[--><span tabindex="-1" data-v-dfe84b2d></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-dfe84b2d> Skip to content </a><!--]--><!----><header class="VPNav" data-v-9a9b3e71 data-v-ff2ba77b><div class="VPNavBar has-sidebar top" data-v-ff2ba77b data-v-5de28717><div class="wrapper" data-v-5de28717><div class="container" data-v-5de28717><div class="title" data-v-5de28717><div class="VPNavBarTitle has-sidebar" data-v-5de28717 data-v-da6e3f59><a class="title" href="/" data-v-da6e3f59><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.png" alt data-v-54abdce0><!--]--><span data-v-da6e3f59>çŸ¥è¯†åº“</span><!--[--><!--]--></a></div></div><div class="content" data-v-5de28717><div class="content-body" data-v-5de28717><!--[--><!--]--><div class="VPNavBarSearch search" data-v-5de28717><!--[--><!----><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢æ–‡æ¡£"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">æœç´¢æ–‡æ¡£</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-5de28717 data-v-f6f9d9a8><span id="main-nav-aria-label" class="visually-hidden" data-v-f6f9d9a8>Main Navigation</span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup active" data-v-f6f9d9a8 data-v-6467046a><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-6467046a><span class="text" data-v-6467046a><!----><span data-v-6467046a>çŸ¥è¯†åº“</span><span class="vpi-chevron-down text-icon" data-v-6467046a></span></span></button><div class="menu" data-v-6467046a><div class="VPMenu" data-v-6467046a data-v-0a42a7c6><div class="items" data-v-0a42a7c6><!--[--><!--[--><div class="VPMenuLink" data-v-0a42a7c6 data-v-39281593><a class="VPLink link active" href="/categories/note/index" data-v-39281593><!--[-->æŠ€æœ¯ç¬”è®°<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-0a42a7c6 data-v-39281593><a class="VPLink link" href="/categories/issues/index" data-v-39281593><!--[-->ç¢ç¢å¿µ<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-f6f9d9a8 data-v-6467046a><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-6467046a><span class="text" data-v-6467046a><!----><span data-v-6467046a>åˆ·é¢˜</span><span class="vpi-chevron-down text-icon" data-v-6467046a></span></span></button><div class="menu" data-v-6467046a><div class="VPMenu" data-v-6467046a data-v-0a42a7c6><div class="items" data-v-0a42a7c6><!--[--><!--[--><div class="VPMenuLink" data-v-0a42a7c6 data-v-39281593><a class="VPLink link" href="/courses/leetcode/index" data-v-39281593><!--[-->leetCode top 100<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-5de28717 data-v-0b0b48de><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-0b0b48de data-v-0ad59e1b data-v-3e226e42><span class="check" data-v-3e226e42><span class="icon" data-v-3e226e42><!--[--><span class="vpi-sun sun" data-v-0ad59e1b></span><span class="vpi-moon moon" data-v-0ad59e1b></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-5de28717 data-v-5c192875 data-v-1e77e95a><!--[--><a class="VPSocialLink no-icon" href="https://github.com/mamumu123/mamumu123.github.io" aria-label="github" target="_blank" rel="noopener" data-v-1e77e95a data-v-181250fe><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-5de28717 data-v-13b17f1b data-v-6467046a><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-6467046a><span class="vpi-more-horizontal icon" data-v-6467046a></span></button><div class="menu" data-v-6467046a><div class="VPMenu" data-v-6467046a data-v-0a42a7c6><!----><!--[--><!--[--><!----><div class="group" data-v-13b17f1b><div class="item appearance" data-v-13b17f1b><p class="label" data-v-13b17f1b>åˆ‡æ¢æ—¥å…‰/æš—é»‘æ¨¡å¼</p><div class="appearance-action" data-v-13b17f1b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-13b17f1b data-v-0ad59e1b data-v-3e226e42><span class="check" data-v-3e226e42><span class="icon" data-v-3e226e42><!--[--><span class="vpi-sun sun" data-v-0ad59e1b></span><span class="vpi-moon moon" data-v-0ad59e1b></span><!--]--></span></span></button></div></div></div><div class="group" data-v-13b17f1b><div class="item social-links" data-v-13b17f1b><div class="VPSocialLinks social-links-list" data-v-13b17f1b data-v-1e77e95a><!--[--><a class="VPSocialLink no-icon" href="https://github.com/mamumu123/mamumu123.github.io" aria-label="github" target="_blank" rel="noopener" data-v-1e77e95a data-v-181250fe><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-5de28717 data-v-c5528510><span class="container" data-v-c5528510><span class="top" data-v-c5528510></span><span class="middle" data-v-c5528510></span><span class="bottom" data-v-c5528510></span></span></button></div></div></div></div><div class="divider" data-v-5de28717><div class="divider-line" data-v-5de28717></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-9a9b3e71 data-v-681dfa63><div class="container" data-v-681dfa63><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-681dfa63><span class="vpi-align-left menu-icon" data-v-681dfa63></span><span class="menu-text" data-v-681dfa63>æ–‡ç« </span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-681dfa63 data-v-359b6150><button data-v-359b6150>è¿”å›é¡¶éƒ¨</button><!----></div></div></div><aside class="VPSidebar" data-v-9a9b3e71 data-v-cc1102fb><div class="curtain" data-v-cc1102fb></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-cc1102fb><span class="visually-hidden" id="sidebar-aria-label" data-v-cc1102fb> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-cc1102fb><section class="VPSidebarItem level-0 collapsible" data-v-cc1102fb data-v-e387d246><div class="item" role="button" tabindex="0" data-v-e387d246><div class="indicator" data-v-e387d246></div><h2 class="text" data-v-e387d246><img class="chinese-zodiac" style="position: static; vertical-align: middle; padding-bottom: 3px;" src="/img/svg/chinese-zodiac/dragon.svg" title="é¾™å¹´" alt="ç”Ÿè‚–">
            2024å¹´ (3ç¯‡)</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-e387d246><span class="vpi-chevron-right caret-icon" data-v-e387d246></span></div></div><div class="items" data-v-e387d246><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e387d246 data-v-e387d246><div class="item" data-v-e387d246><div class="indicator" data-v-e387d246></div><a class="VPLink link link" href="/categories/note/2024/01/7/%E5%A6%82%E4%BD%95%E5%9C%A8%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B8%AD%E6%89%BE%E5%88%B0%E5%B9%B6%E5%88%A0%E9%99%A4%E6%9C%AA%E4%BD%BF%E7%94%A8%E7%9A%84%E7%BB%84%E4%BB%B6" data-v-e387d246><!--[--><p class="text" data-v-e387d246><div class="text-color-red mr-[6px]" style="font-weight: 550; display: inline-block;">1</div>å¦‚ä½•åœ¨å¾®ä¿¡å°ç¨‹åºä¸­æ‰¾åˆ°å¹¶åˆ é™¤æœªä½¿ç”¨çš„ç»„ä»¶</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e387d246 data-v-e387d246><div class="item" data-v-e387d246><div class="indicator" data-v-e387d246></div><a class="VPLink link link" href="/categories/note/2024/01/26/%E5%A6%82%E4%BD%95%E5%9C%A8%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E4%B8%AD%E6%89%BE%E5%88%B0%E5%B9%B6%E5%88%A0%E9%99%A4%E6%9C%AA%E4%BD%BF%E7%94%A8%E7%9A%84%E7%BB%84%E4%BB%B6" data-v-e387d246><!--[--><p class="text" data-v-e387d246><div class="text-color-orange mr-[6px]" style="font-weight: 550; display: inline-block;">2</div>å¦‚ä½•åœ¨å¾®ä¿¡å°ç¨‹åºä¸­æ‰¾åˆ°å¹¶åˆ é™¤æœªä½¿ç”¨çš„ç»„ä»¶</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e387d246 data-v-e387d246><div class="item" data-v-e387d246><div class="indicator" data-v-e387d246></div><a class="VPLink link link" href="/categories/note/2024/01/14/%E4%BD%BF%E7%94%A8%E8%BF%9C%E7%A8%8B%E8%B0%83%E8%AF%95%E5%B7%A5%E5%85%B7%20pageSpy%20%E6%9C%89%E6%84%9F" data-v-e387d246><!--[--><p class="text" data-v-e387d246><div class="text-color-yellow mr-[6px]" style="font-weight: 550; display: inline-block;">3</div>ä½¿ç”¨è¿œç¨‹è°ƒè¯•å·¥å…· pageSpy æœ‰æ„Ÿ</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-cc1102fb><section class="VPSidebarItem level-0 collapsible has-active" data-v-cc1102fb data-v-e387d246><div class="item" role="button" tabindex="0" data-v-e387d246><div class="indicator" data-v-e387d246></div><h2 class="text" data-v-e387d246><img class="chinese-zodiac" style="position: static; vertical-align: middle; padding-bottom: 3px;" src="/img/svg/chinese-zodiac/rabbit.svg" title="å…”å¹´" alt="ç”Ÿè‚–">
            2023å¹´ (6ç¯‡)</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-e387d246><span class="vpi-chevron-right caret-icon" data-v-e387d246></span></div></div><div class="items" data-v-e387d246><!--[--><div class="VPSidebarItem level-1 is-link" data-v-e387d246 data-v-e387d246><div class="item" data-v-e387d246><div class="indicator" data-v-e387d246></div><a class="VPLink link link" href="/categories/note/2023/8/2/%E5%B0%86web%20%E5%BA%94%E7%94%A8%E5%BF%AB%E9%80%9F%E5%B0%81%E8%A3%85%E6%88%90%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BA%94%E7%94%A8" data-v-e387d246><!--[--><p class="text" data-v-e387d246><div class="text-color-red mr-[6px]" style="font-weight: 550; display: inline-block;">1</div>å°†web åº”ç”¨å¿«é€Ÿå°è£…æˆç§»åŠ¨ç«¯åº”ç”¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e387d246 data-v-e387d246><div class="item" data-v-e387d246><div class="indicator" data-v-e387d246></div><a class="VPLink link link" href="/categories/note/2023/6/26/%E5%A6%82%E4%BD%95%E7%94%A8%20ffmpeg%20+%20canvas%20%E5%86%99%E4%B8%80%E4%B8%AA%E5%9C%A8%E7%BA%BF%E5%8F%AF%E8%A7%86%E5%8C%96%E9%9F%B3%E8%A7%86%E9%A2%91%E7%BC%96%E8%BE%91%E5%B7%A5%E5%85%B7" data-v-e387d246><!--[--><p class="text" data-v-e387d246><div class="text-color-orange mr-[6px]" style="font-weight: 550; display: inline-block;">2</div>å¦‚ä½•ç”¨ ffmpeg + canvas å†™ä¸€ä¸ªåœ¨çº¿å¯è§†åŒ–éŸ³è§†é¢‘ç¼–è¾‘å·¥å…·</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e387d246 data-v-e387d246><div class="item" data-v-e387d246><div class="indicator" data-v-e387d246></div><a class="VPLink link link" href="/categories/note/2023/5/21/web%20%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%20-%20%E4%BB%8E%E9%9B%B6%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%85%A7%E7%89%87%E7%BC%96%E8%BE%91%E5%99%A8" data-v-e387d246><!--[--><p class="text" data-v-e387d246><div class="text-color-yellow mr-[6px]" style="font-weight: 550; display: inline-block;">3</div>web å›¾åƒå¤„ç† - ä»é›¶å®ç°ä¸€ä¸ªç…§ç‰‡ç¼–è¾‘å™¨</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e387d246 data-v-e387d246><div class="item" data-v-e387d246><div class="indicator" data-v-e387d246></div><a class="VPLink link link" href="/categories/note/2023/10/31/%E5%A6%82%E4%BD%95%E7%94%A8%20service%20worker%20%E5%A2%9E%E5%8A%A0%E5%93%8D%E5%BA%94%E4%BD%93%E7%9A%84%20header%20%E5%AD%97%E6%AE%B5" data-v-e387d246><!--[--><p class="text" data-v-e387d246><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">4</div>å¦‚ä½•ç”¨ service worker å¢åŠ å“åº”ä½“çš„ header å­—æ®µ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e387d246 data-v-e387d246><div class="item" data-v-e387d246><div class="indicator" data-v-e387d246></div><a class="VPLink link link" href="/categories/note/2023/04/12/%E4%BB%8E%E9%9B%B6%E5%88%B0%E4%B8%80%E4%B8%8A%E7%BA%BF%E5%B0%8F%E7%A8%8B%E5%BA%8F-%EF%BC%88%E7%9B%9B%E5%94%90%E5%AF%86%E7%9B%92%EF%BC%89%E7%99%BE%E7%A7%91%E7%AD%94%E9%A2%98%E7%B1%BB" data-v-e387d246><!--[--><p class="text" data-v-e387d246><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">5</div>ä»é›¶åˆ°ä¸€ä¸Šçº¿å°ç¨‹åº-ï¼ˆç››å”å¯†ç›’ï¼‰ç™¾ç§‘ç­”é¢˜ç±»</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-e387d246 data-v-e387d246><div class="item" data-v-e387d246><div class="indicator" data-v-e387d246></div><a class="VPLink link link" href="/categories/note/2023/03/22/canvas%20%E5%AE%9E%E6%88%98%20-%20%E5%A4%B4%E5%83%8F%E7%BB%84%E8%A3%85%E3%80%81%E9%A2%9C%E8%89%B2%E9%80%89%E5%8F%96" data-v-e387d246><!--[--><p class="text" data-v-e387d246><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">6</div>canvas å®æˆ˜ - å¤´åƒç»„è£…ã€é¢œè‰²é€‰å–</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-9a9b3e71 data-v-e2d3d807><div class="VPDoc has-sidebar has-aside" data-v-e2d3d807 data-v-f07718f6><!--[--><!--]--><div class="container" data-v-f07718f6><div class="aside" data-v-f07718f6><div class="aside-curtain" data-v-f07718f6></div><div class="aside-container" data-v-f07718f6><div class="aside-content" data-v-f07718f6><div class="VPDocAside" data-v-f07718f6 data-v-7b2e46ba><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-7b2e46ba data-v-e846d454><div class="content" data-v-e846d454><div class="outline-marker" data-v-e846d454></div><div class="outline-title" role="heading" aria-level="2" data-v-e846d454>ç›®å½•</div><nav aria-labelledby="doc-outline-aria-label" data-v-e846d454><span class="visually-hidden" id="doc-outline-aria-label" data-v-e846d454> Table of Contents for current page </span><ul class="VPDocOutlineItem root" data-v-e846d454 data-v-cd8cc4f4><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-7b2e46ba></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-f07718f6><div class="content-container" data-v-f07718f6><!--[--><!--]--><main class="main" data-v-f07718f6><div style="position:relative;" class="vp-doc _categories_note_2023_5_21_web%20%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%20-%20%E4%BB%8E%E9%9B%B6%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%85%A7%E7%89%87%E7%BC%96%E8%BE%91%E5%99%A8" data-v-f07718f6><div><h1 id="web-å›¾åƒå¤„ç†-ä»é›¶å®ç°ä¸€ä¸ªç…§ç‰‡ç¼–è¾‘å™¨" tabindex="-1">web å›¾åƒå¤„ç† - ä»é›¶å®ç°ä¸€ä¸ªç…§ç‰‡ç¼–è¾‘å™¨ <a class="header-anchor" href="#web-å›¾åƒå¤„ç†-ä»é›¶å®ç°ä¸€ä¸ªç…§ç‰‡ç¼–è¾‘å™¨" aria-label="Permalink to &quot;web å›¾åƒå¤„ç† - ä»é›¶å®ç°ä¸€ä¸ªç…§ç‰‡ç¼–è¾‘å™¨&quot;">â€‹</a></h1><!----><h2 id="é¡¹ç›®ä»‹ç»" tabindex="-1">é¡¹ç›®ä»‹ç» <a class="header-anchor" href="#é¡¹ç›®ä»‹ç»" aria-label="Permalink to &quot;é¡¹ç›®ä»‹ç»&quot;">â€‹</a></h2><h3 id="å…³é”®è¯" tabindex="-1">å…³é”®è¯ <a class="header-anchor" href="#å…³é”®è¯" aria-label="Permalink to &quot;å…³é”®è¯&quot;">â€‹</a></h3><p>imageDataã€canvasã€ å›¾åƒå¤„ç†ã€æ»¤é•œã€è£å‰ª</p><h3 id="èƒŒæ™¯ä»‹ç»" tabindex="-1">èƒŒæ™¯ä»‹ç» <a class="header-anchor" href="#èƒŒæ™¯ä»‹ç»" aria-label="Permalink to &quot;èƒŒæ™¯ä»‹ç»&quot;">â€‹</a></h3><p>æœ¬æ–‡é€šè¿‡ canvas çš„ ImageDataï¼Œ å®ç°äº†ä¸€ä¸ªåŸºç¡€çš„å›¾åƒå¤„ç†å·¥å…·ã€‚å¯ä»¥åœ¨æµè§ˆå™¨å¯¹å›¾ç‰‡è¿›è¡Œå·¦å³é•œåƒã€å·¦å³æ—‹è½¬ã€é¢œè‰²æ»¤é•œã€å°ºå¯¸ä¿®æ”¹ç­‰æ“ä½œã€‚</p><h3 id="åŠŸèƒ½ä»‹ç»" tabindex="-1">åŠŸèƒ½ä»‹ç» <a class="header-anchor" href="#åŠŸèƒ½ä»‹ç»" aria-label="Permalink to &quot;åŠŸèƒ½ä»‹ç»&quot;">â€‹</a></h3><p>é€› github çƒ­æ¦œçš„æ—¶å€™çœ‹åˆ°ä¸€ä¸ªé¡¹ç›® <a href="http://hepengwei.cn/#/gameImage" target="_blank" rel="noreferrer">visualization-collection</a>, é‡Œé¢æœ‰å¾ˆå¤šçš„å‰ç«¯è§†è§‰æ•ˆæœã€‚å…¶ä¸­æœ‰ä¸€ä¸ªå›¾ç‰‡å¤„ç†çš„é¡¹ç›®ï¼ˆ<a href="http://hepengwei.cn/#/gameImage" target="_blank" rel="noreferrer">ä½“éªŒåœ°å€</a>ï¼‰ï¼Œå®ç°äº†å¯¹å›¾ç‰‡çš„æ»¤é•œã€ç¿»è½¬ã€æ—‹è½¬ç­‰åŠŸèƒ½ï¼Œæ„Ÿè§‰æ˜¯ä¸ªå¾ˆæœ‰ç”¨çš„åŠŸèƒ½ï¼Œæ‰€ä»¥å°è¯•è¿›è¡Œå­¦ä¹ å’Œç†è§£ã€‚æœ€ç»ˆå®ç°ä¸€ä¸ªåŸºç¡€ç‰ˆçš„å›¾åƒè£å‰ªå·¥å…·ã€‚</p><h3 id="æ•ˆæœå›¾" tabindex="-1">æ•ˆæœå›¾ <a class="header-anchor" href="#æ•ˆæœå›¾" aria-label="Permalink to &quot;æ•ˆæœå›¾&quot;">â€‹</a></h3><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/883caeccb3cb40b69a001ba88a8801ca~tplv-k3u1fbpfcp-watermark.image#?w=2746&amp;h=1622&amp;s=893926&amp;e=png&amp;b=f8f8f8" alt="æˆªå±2023-05-21 14.38.09.png"></p><h3 id="ä½“éªŒåœ°å€" tabindex="-1">ä½“éªŒåœ°å€ <a class="header-anchor" href="#ä½“éªŒåœ°å€" aria-label="Permalink to &quot;ä½“éªŒåœ°å€&quot;">â€‹</a></h3><p><a href="https://mamumu123.github.io/img-generate/cut" target="_blank" rel="noreferrer">åœ¨çº¿ä½“éªŒ</a></p><h3 id="ä»£ç ä»“åº“" tabindex="-1">ä»£ç ä»“åº“ <a class="header-anchor" href="#ä»£ç ä»“åº“" aria-label="Permalink to &quot;ä»£ç ä»“åº“&quot;">â€‹</a></h3><p><a href="https://github.com/mamumu123/img-generate" target="_blank" rel="noreferrer">img-generate </a>(éƒ½ç‚¹è¿›å»äº†ï¼Œå°±å¸®æˆ‘ç‚¹ä¸ªå…è´¹çš„ star å§ğŸ¥°)</p><h2 id="æµç¨‹çŸ¥è¯†ç‚¹-api-ä»‹ç»" tabindex="-1">æµç¨‹çŸ¥è¯†ç‚¹(API)ä»‹ç» <a class="header-anchor" href="#æµç¨‹çŸ¥è¯†ç‚¹-api-ä»‹ç»" aria-label="Permalink to &quot;æµç¨‹çŸ¥è¯†ç‚¹(API)ä»‹ç»&quot;">â€‹</a></h2><h3 id="å¤„ç†æµç¨‹" tabindex="-1">å¤„ç†æµç¨‹ <a class="header-anchor" href="#å¤„ç†æµç¨‹" aria-label="Permalink to &quot;å¤„ç†æµç¨‹&quot;">â€‹</a></h3><p>åœ¨æµè§ˆå™¨ä¸­ ï¼Œå›¾ç‰‡æœ¬èº«æ˜¯æ— æ³•è¢«ä¿®æ”¹çš„ã€‚å¦‚æœæƒ³è¦å¤„ç†å›¾åƒï¼ˆImage)ï¼Œå¯ä»¥é€šè¿‡è½¬åŒ–æˆ Canvas æ¥å®ç°ã€‚</p><!----><h3 id="image-å’Œ-canvas-çš„ç›¸äº’è½¬åŒ–" tabindex="-1">image å’Œ canvas çš„ç›¸äº’è½¬åŒ– <a class="header-anchor" href="#image-å’Œ-canvas-çš„ç›¸äº’è½¬åŒ–" aria-label="Permalink to &quot;image å’Œ canvas çš„ç›¸äº’è½¬åŒ–&quot;">â€‹</a></h3><p>image å’Œ canvas ä¹‹é—´æ˜¯å¯ä»¥ç›¸äº’è½¬åŒ–çš„</p><h4 id="image-canvas" tabindex="-1">image -&gt; canvas <a class="header-anchor" href="#image-canvas" aria-label="Permalink to &quot;image -&gt; canvas&quot;">â€‹</a></h4><p>é€šè¿‡ <code>drawImage</code> å¯ä»¥å®ç°</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// å°†å›¾ç‰‡ç»˜åˆ¶åˆ°ç”»å¸ƒä¸Š</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">drawImage</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(image, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span></code></pre></div><h4 id="canvas-image" tabindex="-1">canvas -&gt; image <a class="header-anchor" href="#canvas-image" aria-label="Permalink to &quot;canvas -&gt; image&quot;">â€‹</a></h4><p>Canvas API ä¸­çš„ <code>toDataURL</code> å’Œ <code>toBlob</code> æ–¹æ³•éƒ½å¯ä»¥å°† <code>Canvas</code> è½¬æ¢ä¸ºå›¾ç‰‡</p><p>æ–¹æ³• 1: é€šè¿‡ <code>toDataURL</code> å®ç°: å¯ä»¥ç›´æ¥ç”¨äºæ˜¾ç¤ºå›¾ç‰‡æˆ–å°†å›¾ç‰‡ä¸Šä¼ åˆ°æœåŠ¡å™¨</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// å°†ç”»å¸ƒè½¬æ¢ä¸ºbase64æ ¼å¼çš„å›¾ç‰‡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> dataURL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">toDataURL</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// èµ‹å€¼ç»™ Image</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> newImg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;img&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">newImg.src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> dataURL;</span></span></code></pre></div><p>æ–¹æ³• 2: é€šè¿‡ <code>toBlob</code> å®ç°: å¯ä»¥ç”¨äºå°†å›¾ç‰‡ä¿å­˜åˆ°æœ¬åœ°æˆ–ä¸Šä¼ åˆ°æœåŠ¡å™¨</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;myCanvas&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">toBlob</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">blob</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">createObjectURL</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(blob);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">  // å®ç°ä¸‹è½½åŠŸèƒ½</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  a.href </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> url;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  a.download </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;myImage.png&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  a.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">click</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">();</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  URL</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">revokeObjectURL</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(url);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;image/png&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span></code></pre></div><h3 id="canvas-ä¿®æ”¹-getimagedata" tabindex="-1">Canvas ä¿®æ”¹ï¼ˆgetImageDataï¼‰ <a class="header-anchor" href="#canvas-ä¿®æ”¹-getimagedata" aria-label="Permalink to &quot;Canvas ä¿®æ”¹ï¼ˆgetImageDataï¼‰&quot;">â€‹</a></h3><p>åœ¨çŸ¥é“ Image å’Œ Canvas å¦‚ä½•è½¬åŒ–ä»¥åï¼Œæ¥ä¸‹æ¥å°±çœ‹å¦‚ä½•å¯¹ Canvas è¿›è¡Œä¿®æ”¹ã€‚è¿™é‡Œå°±éœ€è¦å†äº†è§£ä¸€ä¸ª API <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/getImageData" target="_blank" rel="noreferrer">getImageData</a>ã€‚</p><h4 id="imagedata" tabindex="-1">ImageData <a class="header-anchor" href="#imagedata" aria-label="Permalink to &quot;ImageData&quot;">â€‹</a></h4><p><code>getImageData</code> è¿”å›ä¸€ä¸ª ImageData å¯¹è±¡ï¼Œç”¨æ¥æè¿° Canvas åŒºåŸŸéšå«çš„åƒç´ æ•°æ®ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// è¿™ä¸ªåŒºåŸŸé€šè¿‡çŸ©å½¢è¡¨ç¤ºï¼Œèµ·å§‹ç‚¹ä¸º*(sx, sy)ã€å®½ä¸ºswã€é«˜ä¸ºsh</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">ImageData ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">getImageData</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(sx, sy, sw, sh);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// eg: ImageData { width: 100, height: 100, data: Uint8ClampedArray[40000] }</span></span></code></pre></div><p>è¿”å›å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­çš„ width å’Œ height è¡¨ç¤ºåŒºåŸŸçš„å®½ã€é«˜ã€‚æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹ data:</p><blockquote><p>ImageData.data: [Uint8ClampedArray] æè¿°äº†ä¸€ä¸ªä¸€ç»´æ•°ç»„ï¼ŒåŒ…å«ä»¥ <code>RGBA</code> é¡ºåºçš„æ•°æ®ï¼Œæ•°æ®ä½¿ç”¨ 0 è‡³ 255ï¼ˆåŒ…å«ï¼‰çš„æ•´æ•°è¡¨ç¤ºã€‚</p></blockquote><p>æˆ‘ä»¬æ¥åšä¸€ä¸ª demo, æ¯”å¦‚æˆ‘ç”»ä¸€ä¸ª <code>2 * 2</code>çš„ Canvas, åˆ†åˆ«å¡«å……å››ç§é¢œè‰²ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// è®¾ç½®ç”»å¸ƒå¤§å°ä¸º2*2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">canvas.width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">canvas.height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// ç»˜åˆ¶å››ä¸ªç‚¹ä½çš„é¢œè‰²</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">ctx.fillStyle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;red&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">fillRect</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">ctx.fillStyle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;green&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">fillRect</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">ctx.fillStyle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;blue&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">fillRect</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">ctx.fillStyle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;white&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">fillRect</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// å°†ç”»å¸ƒè½¬æ¢ä¸ºbase64æ ¼å¼çš„å›¾ç‰‡å¹¶æ‰“å°åˆ°æ§åˆ¶å°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> imageData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">getImageData</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">as</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ImageData</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(imageData);</span></span></code></pre></div><p>å±•ç¤ºçš„æ•ˆæœåƒè¿™æ ·ï¼š <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/54dbf8a5dc344e26a6c9be61604ad7e1~tplv-k3u1fbpfcp-watermark.image#?w=2036&amp;h=1041&amp;s=271855&amp;e=png&amp;b=fefefe" alt="ä¼ä¸šå¾®ä¿¡æˆªå›¾1a43fa10-fb69-49b0-b888-fb8c39cb1b9b.png"></p><p>èƒ½çœ‹åˆ° data çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ¯ 4 ä½æè¿°ä¸€ä¸ªåƒç´ ç‚¹ã€‚åˆ†åˆ«è¡¨ç¤ºçº¢è‰²ï¼ˆRedï¼‰ã€ç»¿è‰²ï¼ˆGreenï¼‰ã€è“è‰²ï¼ˆBlueï¼‰å’Œé€æ˜åº¦ï¼ˆAlphaï¼‰å››ä¸ªé€šé“çš„å€¼ï¼Œæ¯ä¸ªé€šé“çš„å€¼èŒƒå›´ä¸º 0 åˆ° 255ï¼Œè¡¨ç¤ºè¯¥é€šé“çš„é¢œè‰²å¼ºåº¦ã€‚å…¶ä¸­ï¼Œé€æ˜åº¦é€šé“çš„å€¼ä¸º 0 è¡¨ç¤ºå®Œå…¨é€æ˜ï¼Œ255 è¡¨ç¤ºå®Œå…¨ä¸é€æ˜ã€‚ data çš„æ€»é•¿åº¦å°±æ˜¯ <code>width * height * 4</code>ã€‚</p><p>é€šè¿‡å››ä¸ªé€šé“æ•°å€¼çš„å˜åŒ–ï¼Œå°±å¯ä»¥æè¿°åƒç´ ç‚¹çš„é¢œè‰²å€¼ã€‚ <img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/044c417bbdb84e64a7457fb0bf862155~tplv-k3u1fbpfcp-watermark.image#?w=915&amp;h=377&amp;s=20783&amp;e=png&amp;b=f9f9f9" alt="æˆªå±2023-05-19 11.58.52.png"></p><p>ä½“éªŒåœ°å€: <a href="https://mamumu123.github.io/img-generate/red" target="_blank" rel="noreferrer">ä¸‰åŸè‰²åˆæˆ</a></p><p>é‚£æˆ‘ä»¬é€šè¿‡ä¿®æ”¹ ImageDataï¼Œå°±å¯ä»¥å®ç°å›¾åƒå¤„ç†ã€‚å¦‚æœæˆ‘ä»¬æƒ³ä¿®æ”¹åˆ°åŸå›¾ï¼Œå°±è°ƒç”¨ <code>putImageData</code>ï¼›å¦‚æœæˆ‘ä»¬æƒ³è¦ç”Ÿæˆä¸€ä¸ªæ–°çš„ Imageï¼Œå°±ä½¿ç”¨ <code>ImageData</code> æ–°å»ºä¸€ä¸ª Canvasã€‚</p><h2 id="åŸºç¡€æ“ä½œæ•ˆæœå®ç°" tabindex="-1">åŸºç¡€æ“ä½œæ•ˆæœå®ç° <a class="header-anchor" href="#åŸºç¡€æ“ä½œæ•ˆæœå®ç°" aria-label="Permalink to &quot;åŸºç¡€æ“ä½œæ•ˆæœå®ç°&quot;">â€‹</a></h2><p>é€šè¿‡å¯¹ <code>ImageData</code> çš„æ•°æ®å˜æ¢ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ä¸€äº›åŸºç¡€çš„å›¾åƒå¤„ç†ï¼š</p><ul><li>åŸºæœ¬æ»¤é•œï¼šå•è‰²æ»¤é•œ</li><li>æ—‹è½¬ã€é•œåƒ</li><li>ç°åŒ–</li><li>é”åŒ–</li></ul><p>æˆ‘ä»¬æ¥é€‰å–ä¸€äº›è¿›è¡Œå®ç°ã€‚</p><h3 id="çº¢è‰²æ»¤é•œ" tabindex="-1">çº¢è‰²æ»¤é•œ <a class="header-anchor" href="#çº¢è‰²æ»¤é•œ" aria-label="Permalink to &quot;çº¢è‰²æ»¤é•œ&quot;">â€‹</a></h3><p>çº¢è‰²æ»¤é•œ,å°±æ˜¯åœ¨ <code>RGB</code> é€šé“ä¸­ä»…ä¿ç•™çº¢è‰²é€šé“çš„æ•°å€¼,è€Œå°†å…¶ä»–é¢œè‰²é€šé“çš„æ•°å€¼è®¾ç½®ä¸º 0ã€‚</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// çº¢è‰²æ»¤é•œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> toRed</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">imageData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> ImageData</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">width</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">height</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> imageData;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">  // æ–°å»ºä¸€ä¸ªæ•°ç»„ï¼Œé•¿åº¦å’Œ imageData ä¿æŒä¸€è‡´ã€‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> newImgData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> Uint8ClampedArray</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(data.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  for</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">; y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> height; y</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">; x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width; x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">      // TODO something</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">  // æ–°å»ºä¸€ä¸ª ImageData è¿”å›</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> ImageData</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(newImgData, width, height);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">};</span></span></code></pre></div><p>ä¸€ä¸ªåƒç´ å¯¹åº” 4 ä¸ªé€šé“ï¼Œçº¢ã€ç»¿ã€è“ã€é€æ˜åº¦é€šé“ã€‚å¯¹äºæ¯ä¸€ä¸ªåƒç´ ï¼Œæˆ‘ä»¬å°±éœ€è¦è®¾ç½®å››ä¸ªå…ƒç´ çš„å€¼ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// startIndex å¯¹åº”çš„åˆ™æ˜¯ a[y][x] çš„åƒç´ ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> startIndex</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// åªä¿ç•™ R é€šé“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">newImgData[startIndex] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[startIndex];</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// G å’Œ B é€šé“è®¾ç½®ä¸º 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">newImgData[startIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">newImgData[startIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">newImgData[startIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[startIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">];</span></span></code></pre></div><p>æ•ˆæœå¦‚å›¾ï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b1f5c64fdd894e9d827347270b48a754~tplv-k3u1fbpfcp-watermark.image#?w=678&amp;h=686&amp;s=480738&amp;e=png&amp;b=ca281d" alt="æˆªå±2023-05-20 10.01.42.png"></p><p>åŒç†ï¼Œè“è‰²æ»¤é•œï¼Œé»„è‰²æ»¤é•œï¼Œçº¢è“è‰²æ»¤é•œç­‰éƒ½æ˜¯ä¸€æ ·çš„å®ç°é€»è¾‘ï¼Œåªéœ€è¦ä¿ç•™å¯¹åº”é¢œè‰²é€šé“çš„æ•°å€¼ã€‚å°†å…¶ä»–é¢œè‰²é€šé“çš„æ•°å­—è®¾ç½®ä¸º 0 å°±å¯ä»¥äº†ã€‚</p><h3 id="ç°åŒ–" tabindex="-1">ç°åŒ– <a class="header-anchor" href="#ç°åŒ–" aria-label="Permalink to &quot;ç°åŒ–&quot;">â€‹</a></h3><p>å›¾ç‰‡çš„ç°åŒ–æ˜¯æŒ‡å°†å½©è‰²å›¾ç‰‡è½¬æ¢ä¸ºé»‘ç™½ç°åº¦å›¾åƒçš„è¿‡ç¨‹ã€‚å°†å½©è‰²å›¾ç‰‡è½¬æ¢ä¸ºç°åº¦å›¾åƒçš„è¿‡ç¨‹é€šå¸¸ä½¿ç”¨åŠ æƒå¹³å‡æ³•æ¥è®¡ç®—æ¯ä¸ªåƒç´ çš„äº®åº¦å€¼ã€‚åŠ æƒå¹³å‡æ³•å°†æ¯ä¸ªåƒç´ çš„çº¢ã€ç»¿ã€è“ä¸‰ä¸ªé€šé“çš„å€¼æŒ‰ç…§ä¸€å®šçš„æƒé‡è¿›è¡ŒåŠ æƒå¹³å‡ï¼Œå¾—åˆ°ä¸€ä¸ªäº®åº¦å€¼ã€‚é€šå¸¸ä½¿ç”¨ä»¥ä¸‹å…¬å¼æ¥è®¡ç®—æ¯ä¸ªåƒç´ çš„äº®åº¦å€¼ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">L</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0.299</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> R</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0.587</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> G</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0.114</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> B</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span></code></pre></div><p>é‚£ä¹ˆç°åŒ–å¯¹åº”çš„å…ƒç´ ä¿®æ”¹åˆ™æ˜¯ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> startIndex</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// è®¾ç½®ä¸ºä¸­é—´å€¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> avgColor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0.299</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[startIndex] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">  0.587</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[startIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  data[startIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0.114</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">newImgData[startIndex] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> avgColor;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">newImgData[startIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> avgColor;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">newImgData[startIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> avgColor;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">newImgData[startIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[startIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">];</span></span></code></pre></div><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5c9b3cdfc5b94c16a6bb1d8ac4ffe459~tplv-k3u1fbpfcp-watermark.image#?w=628&amp;h=628&amp;s=346799&amp;e=png&amp;b=848484" alt="æˆªå±2023-05-20 11.09.40.png"></p><h3 id="å·¦å³é•œåƒ" tabindex="-1">å·¦å³é•œåƒ <a class="header-anchor" href="#å·¦å³é•œåƒ" aria-label="Permalink to &quot;å·¦å³é•œåƒ&quot;">â€‹</a></h3><p>å·¦å³é•œåƒæ˜¯æŒ‡å°†ä¸€ä¸ªå›¾åƒåœ¨å·¦å³æ–¹å‘ä¸Šè¿›è¡Œæ°´å¹³ç¿»è½¬ï¼Œå¾—åˆ°æ–°çš„å›¾åƒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå°†ä¸€ä¸ªå›¾åƒæŒ‰ç…§ä¸­å¿ƒå‚ç›´çº¿å¯¹ç§°ï¼Œå¹¶å°†å·¦å³ä¸¤ä¾§å®Œå…¨é‡åˆï¼Œå°±å¯ä»¥å¾—åˆ°å·¦å³é•œåƒã€‚è¦å®ç°å·¦å³é•œåƒï¼Œåˆ™éœ€è¦è¿›è¡Œä½ç½®å˜æ¢ <code>a[y][x] = a[y][width - 1 - x]</code></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// a[y][x] = a[y][width - 1 - x];</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// xxYxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxYxx</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// startIndex å¯¹åº”çš„åˆ™æ˜¯ a[y][x] çš„åƒç´ ç‚¹</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> startIndex</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">newImgData[startIndex] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[(y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]; </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">//</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">newImgData[startIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[(y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">newImgData[startIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[(y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">newImgData[startIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[(y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">];</span></span></code></pre></div><p>æ•ˆæœå¦‚å›¾ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/323c22578a9e4a33affc744d04cc3b20~tplv-k3u1fbpfcp-watermark.image#?w=626&amp;h=618&amp;s=715960&amp;e=png&amp;b=cf8374" alt="æˆªå±2023-05-20 10.21.24.png"></p><h3 id="ä¸Šä¸‹é•œåƒ" tabindex="-1">ä¸Šä¸‹é•œåƒ <a class="header-anchor" href="#ä¸Šä¸‹é•œåƒ" aria-label="Permalink to &quot;ä¸Šä¸‹é•œåƒ&quot;">â€‹</a></h3><p>ä¸Šä¸‹é•œåƒæ˜¯æŒ‡å°†ä¸€ä¸ªå›¾åƒæŒ‰ç…§ä¸­å¿ƒæ°´å¹³çº¿å¯¹ç§°ï¼Œå¹¶å°†ä¸Šä¸‹ä¸¤ä¾§å®Œå…¨é‡åˆï¼Œä»è€Œå¾—åˆ°é•œåƒç»“æœã€‚è¦å®ç°ä¸Šä¸‹é•œåƒï¼Œåˆ™éœ€è¦è¿›è¡Œä½ç½®å˜æ¢ <code>a[y][x] = a[height -1 - y][x]</code></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> startIndex</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">newImgData[startIndex] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[((height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">newImgData[startIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[((height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">newImgData[startIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[((height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">newImgData[startIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[((height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">];</span></span></code></pre></div><p>æ•ˆæœå¦‚å›¾ï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1a82d77197334833ba4e76e7c27a95e8~tplv-k3u1fbpfcp-watermark.image#?w=628&amp;h=624&amp;s=724497&amp;e=png&amp;b=cf8374" alt="æˆªå±2023-05-20 10.21.37.png"></p><h3 id="å‘å·¦æ—‹è½¬-90-åº¦" tabindex="-1">å‘å·¦æ—‹è½¬ 90 åº¦ <a class="header-anchor" href="#å‘å·¦æ—‹è½¬-90-åº¦" aria-label="Permalink to &quot;å‘å·¦æ—‹è½¬ 90 åº¦&quot;">â€‹</a></h3><p>è¦å®ç°å‘å·¦æ—‹è½¬ 90 åº¦ï¼Œåˆ™éœ€è¦è¿›è¡Œä½ç½®å˜æ¢ <code>a[x * height + y] = a[y * width + width - x - 1]</code></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">/*</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">1 2 3    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">4 5 6</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">7 8 9</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">=ã€‹</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">3 6 9</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">2 5 8</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">1 4 7</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">*/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> startIndex</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">newImgData[startIndex] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[(y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">newImgData[startIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[(y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">newImgData[startIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[(y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">newImgData[startIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[(y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">];</span></span></code></pre></div><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2399da670f5a429b9161d4cf803ae659~tplv-k3u1fbpfcp-watermark.image#?w=608&amp;h=614&amp;s=629514&amp;e=png&amp;b=d08475" alt="æˆªå±2023-05-20 10.59.38.png"></p><h3 id="å‘å³æ—‹è½¬-90-åº¦" tabindex="-1">å‘å³æ—‹è½¬ 90 åº¦ <a class="header-anchor" href="#å‘å³æ—‹è½¬-90-åº¦" aria-label="Permalink to &quot;å‘å³æ—‹è½¬ 90 åº¦&quot;">â€‹</a></h3><p>è¦å®ç°å‘å³æ—‹è½¬ 90 åº¦ï¼Œåˆ™éœ€è¦è¿›è¡Œä½ç½®å˜æ¢ <code>a[x * height + y] = a[(height - y - 1) * width + x]</code></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">/*</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">1 2 3    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">4 5 6</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">7 8 9</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">=ã€‹</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">7 4 1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">8 5 2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">9 6 3</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">*/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> startIndex</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">newImgData[startIndex] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[((height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">newImgData[startIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[((height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">newImgData[startIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[((height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">newImgData[startIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[((height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">];</span></span></code></pre></div><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ff57b9afa22c4c3cb245831609685bcf~tplv-k3u1fbpfcp-watermark.image#?w=638&amp;h=626&amp;s=668687&amp;e=png&amp;b=d08778" alt="æˆªå±2023-05-20 10.59.00.png"></p><h3 id="é”åŒ–" tabindex="-1">é”åŒ– <a class="header-anchor" href="#é”åŒ–" aria-label="Permalink to &quot;é”åŒ–&quot;">â€‹</a></h3><p>é”åŒ–ç”¨äºå¢å¼ºå›¾åƒçš„è¾¹ç¼˜å’Œç»†èŠ‚ï¼Œä½¿å›¾åƒæ›´åŠ æ¸…æ™°å’Œé²œæ˜ã€‚åœ¨æ•°å­—å›¾åƒå¤„ç†ä¸­ï¼Œé”åŒ–æŠ€æœ¯é€šå¸¸é€šè¿‡å·ç§¯è¿ç®—æ¥å®ç°ã€‚å·ç§¯è¿ç®—æ˜¯ä¸€ç§åŸºäºæ»¤æ³¢å™¨çš„å›¾åƒå¤„ç†æŠ€æœ¯ï¼Œå®ƒé€šè¿‡å°†ä¸€ä¸ªæ»¤æ³¢å™¨åº”ç”¨äºå›¾åƒçš„æ¯ä¸ªåƒç´ ï¼Œæ¥æ”¹å˜å›¾åƒçš„äº®åº¦å’Œé¢œè‰²ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// -1 -1 -1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// -1  9 -1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// -1 -1 -1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> kernel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">9</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">]; </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// é”åŒ–å·ç§¯æ ¸</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> newImageData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> convolutionMatrix</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(imageData, kernel);</span></span></code></pre></div><p>å·ç§¯çŸ©é˜µçš„å®ç°</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> startIndex</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> index</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> startIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> i;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">  // è¾¹ç¼˜ä¸å¤„ç†ï¼Œç›´æ¥è®¾ç½®ä¸ºåŸå§‹å€¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> ||</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    newImgData[index] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[index];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    // æ¯ä¸ªç‚¹ç­‰äºæ‰€åœ¨çš„ 8 é‚»åŸŸçš„ 3 * 3 çŸ©é˜µå’Œå·ç§¯æ ¸ï¼ˆkernelï¼‰å¯¹åº”ä½ç½®ç›¸ä¹˜å†ç›¸åŠ </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    newImgData[index] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      kernel[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[index </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> // å·¦ä¸Šè§’</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      kernel[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[index </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> // ä¸Šæ–¹ width * 4 = ä¸€è¡Œçš„æ•°æ®æ•°é‡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      kernel[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[index </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      kernel[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[index </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> // å·¦ä¾§</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      kernel[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[index] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;"> // å½“å‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      kernel[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[index </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      kernel[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[index </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      kernel[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">7</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[index </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      kernel[</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[index </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">newImgData[startIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> data[startIndex </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">];</span></span></code></pre></div><p>æ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f62b86585341487e95105d81d4f15a0c~tplv-k3u1fbpfcp-watermark.image#?w=628&amp;h=624&amp;s=1118457&amp;e=png&amp;b=d1826f" alt="æˆªå±2023-05-20 11.12.23.png"></p><h2 id="è£å‰ªåŠŸèƒ½å®ç°" tabindex="-1">è£å‰ªåŠŸèƒ½å®ç° <a class="header-anchor" href="#è£å‰ªåŠŸèƒ½å®ç°" aria-label="Permalink to &quot;è£å‰ªåŠŸèƒ½å®ç°&quot;">â€‹</a></h2><p>è£å‰ªåŠŸèƒ½åˆ†æˆ2éƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><ul><li>è®¾ç½®è£å‰ªå‚æ•°ï¼š xã€yã€widthã€height</li><li>ä¸‹è½½æŒ‡å®šèŒƒå›´çš„å›¾åƒ</li></ul><h3 id="è®¾ç½®è£å‰ªå‚æ•°" tabindex="-1">è®¾ç½®è£å‰ªå‚æ•° <a class="header-anchor" href="#è®¾ç½®è£å‰ªå‚æ•°" aria-label="Permalink to &quot;è®¾ç½®è£å‰ªå‚æ•°&quot;">â€‹</a></h3><p>è®¾ç½®å‚æ•°é€šè¿‡æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ä¸ªæ˜¯å¢åŠ è¡¨å•ï¼Œé€šè¿‡è¡¨å•æ¥å¡«å†™å‚æ•°ï¼›å¦ä¸€ç§æ˜¯æ›´åŠ å¯è§†åŒ–çš„æ‹–æ‹½æ–¹å¼ã€‚ç¬¬ä¸€ç§æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•å®ç°æ‹–æ‹½æ–¹å¼ä¿®æ”¹å‚æ•°ã€‚</p><ul><li>çŸ©å½¢è’™å±‚</li><li>æ‹–æ‹½åŠŸèƒ½</li><li>æ”¾å¤§ç¼©å°åŠŸèƒ½</li></ul><h4 id="çŸ©å½¢è’™å±‚" tabindex="-1">çŸ©å½¢è’™å±‚ <a class="header-anchor" href="#çŸ©å½¢è’™å±‚" aria-label="Permalink to &quot;çŸ©å½¢è’™å±‚&quot;">â€‹</a></h4><p>æˆ‘ä»¬åœ¨é¢„è§ˆ canvas ä¸Šæ–¹</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// é®ç½©å±‚ç»˜åˆ¶</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">useEffect</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> canvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> maskCanvasRef.current;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> ctx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> canvas?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">getContext</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;2d&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">ctx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">||</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> !</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">originData) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">  // ç»˜åˆ¶ä¹‹å‰å…ˆæ¸…é™¤å…¨éƒ¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">clearRect</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, originData?.width, originData?.height);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">  // å¦‚æœå¼€å¯è£å‰ªåŠŸèƒ½</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (startCrop) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    // è®¾ç½®å…¨éƒ¨è’™å±‚ï¼Œå°†èŒƒå›´å†…çš„è’™å±‚å»æ‰ï¼Œè¡¨ç¤ºè£å‰ªèŒƒå›´ï¼›</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    ctx.fillStyle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;rgba(125, 125, 125, 0.5)&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">fillRect</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, originData?.width, originData?.height);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">clearRect</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(cx, cy, cWidth, cHeight);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}, [startCrop, cx, cy, cWidth, cHeight, originData]);</span></span></code></pre></div><p>æˆ‘ä»¬è¿˜å¯ä»¥åœ¨çŸ©å½¢æ¯æ¡è¾¹çš„ä¸­ç‚¹ï¼Œ ç»˜åˆ¶ä¸€ä¸‹åœ†å½¢ï¼Œç”¨æ¥è¿›è¡Œæ”¾å¤§ç¼©å°ï¼š</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// Draw circles at the midpoint of each edge</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> circleRadius</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> midPoints</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  { x: cx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> cWidth </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, y: cy }, </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// Top</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  { x: cx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> cWidth, y: cy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> cHeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> }, </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// Right</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  { x: cx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> cWidth </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, y: cy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> cHeight }, </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// Bottom</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  { x: cx, y: cy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> cHeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> }, </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// Left</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">midPoints.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">point</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">beginPath</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">arc</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(point.x, point.y, circleRadius, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> Math.</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">PI</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ctx.lineWidth </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 5</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ctx.strokeStyle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;red&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">stroke</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">});</span></span></code></pre></div><h3 id="æ‹–æ‹½åŠŸèƒ½" tabindex="-1">æ‹–æ‹½åŠŸèƒ½ <a class="header-anchor" href="#æ‹–æ‹½åŠŸèƒ½" aria-label="Permalink to &quot;æ‹–æ‹½åŠŸèƒ½&quot;">â€‹</a></h3><p>ä¸ºäº†å®ç°æ‹–æ‹½åŠŸèƒ½ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å¯¹ canvas è¿›è¡Œäº‹ä»¶ç›‘å¬ <code>onMouseDown</code>, &#39;onMouseUp&#39;, &#39;onMouseMove&#39;</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#8DDB8C;">canvas</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">    ref</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#F47067;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">maskCanvasRef</span><span style="--shiki-light:#24292E;--shiki-dark:#F47067;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">    className</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#F47067;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">styles.mask__canvas</span><span style="--shiki-light:#24292E;--shiki-dark:#F47067;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">    onMouseDown</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#F47067;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">handleMouseDown</span><span style="--shiki-light:#24292E;--shiki-dark:#F47067;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">    onMouseUp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#F47067;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">handleMouseUp</span><span style="--shiki-light:#24292E;--shiki-dark:#F47067;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#6CB6FF;">    onMouseMove</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#F47067;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">handleMouseMove</span><span style="--shiki-light:#24292E;--shiki-dark:#F47067;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  /&gt;</span></span></code></pre></div><p>åœ¨handleMouseDownå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ¤æ–­é¼ æ ‡æ˜¯å¦åœ¨çŸ©å½¢æ¡†å†…ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è®¾ç½® <code>dragging = true</code> è¯´æ˜å¯ä»¥æ‹–æ‹½ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> handleMouseDown</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> React</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">MouseEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">HTMLCanvasElement</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">y</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> getCanvasMousePosition</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(canvasRef.current</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, e);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    // Check if the mouse is inside the rectangle</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> cx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> cx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> cWidth </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> cy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> cy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> cHeight) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">      setDragging</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">      setOffset</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">({ x: x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> cx, y: y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> cy });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  };</span></span></code></pre></div><p>åœ¨handleMouseMoveå‡½æ•°ä¸­ï¼Œå¦‚æœ <code>dragging</code> çŠ¶æ€ä¸ºtrueï¼Œåˆ™æ ¹æ®é¼ æ ‡çš„ä½ç½®è®¡ç®—å‡ºæ–°çš„çŸ©å½¢æ¡†çš„å¤§å°ï¼Œå¹¶æ›´æ–°çŸ©å½¢æ¡†çš„çŠ¶æ€ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> handleMouseMove</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> React</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">MouseEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">HTMLCanvasElement</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">originData) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (dragging) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">y</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> getCanvasMousePosition</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(canvasRef.current</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, e);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> newX</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> offset.x;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> newY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> offset.y;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    // Check if the new position is within the canvas boundaries</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (newX </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> newX </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> cWidth </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> originData?.width) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">      setX</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(newX);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (newY </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> &amp;&amp;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> newY </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> cHeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">&lt;=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> originData?.height) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">      setY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(newY);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>æœ€åï¼Œåœ¨handleMouseUpå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å°†<code>dragging</code>çŠ¶æ€è®¾ç½®ä¸ºfalseï¼Œè¡¨ç¤ºåœæ­¢æ‹–æ‹½ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> handleMouseUp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">  setDragging</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">};</span></span></code></pre></div><h3 id="ç¼©æ”¾åŠŸèƒ½" tabindex="-1">ç¼©æ”¾åŠŸèƒ½ <a class="header-anchor" href="#ç¼©æ”¾åŠŸèƒ½" aria-label="Permalink to &quot;ç¼©æ”¾åŠŸèƒ½&quot;">â€‹</a></h3><p>ç¼©æ”¾åŠŸèƒ½å’Œæ‹–æ‹½åŠŸèƒ½æ¯”è¾ƒåƒï¼Œä¹Ÿæ˜¯å¤„ç†ä¸‰ä¸ªäº‹ä»¶ é¦–å…ˆåœ¨ handleMouseDown å‡½æ•°ä¸­æ£€æŸ¥é¼ æ ‡æ˜¯å¦åœ¨è°ƒæ•´å¤§å°çš„åœ†åœˆä¸Šã€‚å¦‚æœæ˜¯ï¼Œæˆ‘ä»¬å°† resizing çŠ¶æ€è®¾ç½®ä¸º trueï¼Œå¹¶è®°å½•å½“å‰æ‹–åŠ¨çš„åœ†åœˆçš„ç´¢å¼•ã€‚æˆ‘ä»¬è¿˜å°†é¼ æ ‡çš„åç§»é‡å­˜å‚¨åœ¨ offset çŠ¶æ€ä¸­ï¼Œä»¥ä¾¿åœ¨è°ƒæ•´å¤§å°æ—¶ä½¿ç”¨ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> handleMouseDown</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> React</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">MouseEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">HTMLCanvasElement</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">y</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> getCanvasMousePosition</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(canvasRef.current</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, e);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">    // Check if the mouse is on the resize circle</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> circleRadius</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> midPoints</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      { x: cx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> cWidth </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, y: cy }, </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// Top</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      { x: cx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> cWidth, y: cy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> cHeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> }, </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// Right</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      { x: cx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> cWidth </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, y: cy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> cHeight }, </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// Bottom</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      { x: cx, y: cy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> cHeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> }, </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// Left</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    ];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    midPoints.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">point</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">index</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">isMouseOnCircle</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(x, y, point.x, point.y, circleRadius)) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">        setResizing</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">        setResizeIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(index);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">        setOffset</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">({ x: x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> cx, y: y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> cy });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>æ¥ä¸‹æ¥ï¼Œåœ¨ handleMouseMove å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬æ ¹æ® resizeIndex çš„å€¼æ¥è°ƒæ•´çŸ©å½¢çš„å¤§å°ã€‚æˆ‘ä»¬ä½¿ç”¨ switch è¯­å¥æ¥å¤„ç†ä¸åŒçš„è°ƒæ•´å¤§å°æƒ…å†µï¼š</p><p>å¯¹äºç´¢å¼• 0ï¼ˆé¡¶éƒ¨åœ†åœˆï¼‰ï¼Œæˆ‘ä»¬å°†çŸ©å½¢çš„ cy å€¼è®¾ç½®ä¸ºé¼ æ ‡çš„ y å€¼ï¼Œå¹¶ç›¸åº”åœ°å‡å°çŸ©å½¢çš„é«˜åº¦ã€‚ å¯¹äºç´¢å¼• 1ï¼ˆå³ä¾§åœ†åœˆï¼‰ï¼Œæˆ‘ä»¬å°†çŸ©å½¢çš„å®½åº¦è®¾ç½®ä¸ºé¼ æ ‡ x å€¼ä¸çŸ©å½¢å·¦ä¸Šè§’ x åæ ‡ä¹‹é—´çš„è·ç¦»ã€‚ å¯¹äºç´¢å¼• 2ï¼ˆåº•éƒ¨åœ†åœˆï¼‰ï¼Œæˆ‘ä»¬å°†çŸ©å½¢çš„é«˜åº¦è®¾ç½®ä¸ºé¼ æ ‡ y å€¼ä¸çŸ©å½¢å·¦ä¸Šè§’ y åæ ‡ä¹‹é—´çš„è·ç¦»ã€‚ å¯¹äºç´¢å¼• 3ï¼ˆå·¦ä¾§åœ†åœˆï¼‰ï¼Œæˆ‘ä»¬å°†çŸ©å½¢çš„ cx å€¼è®¾ç½®ä¸ºé¼ æ ‡çš„ x å€¼ï¼Œå¹¶ç›¸åº”åœ°å‡å°çŸ©å½¢çš„å®½åº¦ã€‚</p><p>è¿™æ ·ï¼Œå½“ç”¨æˆ·æ‹–åŠ¨è°ƒæ•´å¤§å°çš„åœ†åœˆæ—¶ï¼ŒçŸ©å½¢çš„å¤§å°å°†æ ¹æ®æ‹–åŠ¨çš„æ–¹å‘è¿›è¡Œè°ƒæ•´ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> handleMouseMove</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;"> React</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">MouseEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#F69D50;">HTMLCanvasElement</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">&gt;) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">originData) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">    switch</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> (resizeIndex) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">      case</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// Top</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">        setY</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(y);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">        setHeight</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(cHeight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> dy);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">        break</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">      case</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// Right</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">        setWidth</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(dx);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">        break</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">      case</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// Bottom</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">        setHeight</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(dy);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">        break</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">      case</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">: </span><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// Left</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">        setX</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(x);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">        setWidth</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(cWidth </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> dx);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">        break</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">      default</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">        break</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}</span></span></code></pre></div><p>æœ€åï¼Œåœ¨handleMouseUpå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å°†<code>dragging</code>çŠ¶æ€è®¾ç½®ä¸ºfalseï¼Œè¡¨ç¤ºåœæ­¢æ‹–æ‹½ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;"> handleMouseUp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">    setResizing</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">    setResizeIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  };</span></span></code></pre></div><h3 id="ä¸‹è½½æŒ‡å®šèŒƒå›´çš„å›¾åƒ" tabindex="-1">ä¸‹è½½æŒ‡å®šèŒƒå›´çš„å›¾åƒ <a class="header-anchor" href="#ä¸‹è½½æŒ‡å®šèŒƒå›´çš„å›¾åƒ" aria-label="Permalink to &quot;ä¸‹è½½æŒ‡å®šèŒƒå›´çš„å›¾åƒ&quot;">â€‹</a></h3><p>æˆ‘ä»¬é¦–å…ˆè·å–åˆ°æŒ‡å®šèŒƒå›´ ImageDataï¼Œç„¶åç”¨è¿™ä¸ªæ•°æ®ç”Ÿæˆä¸€ä¸ªæ–°çš„ canvas</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// get ImageDataï¼Œç„¶åç”¨è¿™ä¸ªæ•°æ®ç”Ÿæˆä¸€ä¸ªæ–°çš„</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> ctx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> canvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">getContext</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;2d&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> imageData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> ctx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">getImageData</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(x, y, width, height);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#768390;">// generate new canvas</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> tempCanvas</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;canvas&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">tempCanvas.width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> width;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">tempCanvas.height </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> height;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> tempCtx</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> tempCanvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">getContext</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;2d&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">tempCtx.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">putImageData</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(imageData, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span></code></pre></div><p>ç„¶åå¦‚ä¹‹å‰ä¸€æ ·ï¼Œæˆ‘ä»¬ç”¨ toBlob å°† canvas è½¬æˆå›¾ç‰‡è¿›è¡Œä¸‹è½½ã€‚</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark-dimmed vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">tempCanvas.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">toBlob</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#F69D50;">blob</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> link</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">createElement</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  link.download </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;"> &#39;canvas.png&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  link.href </span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#6CB6FF;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">createObjectURL</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">(blob</span><span style="--shiki-light:#D73A49;--shiki-dark:#F47067;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">  link.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#DCBDFB;">click</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">}, </span><span style="--shiki-light:#032F62;--shiki-dark:#96D0FF;">&#39;image/png&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#ADBAC7;">);</span></span></code></pre></div><p>æœ€ç»ˆå®ç°çš„æ•ˆæœå¦‚å›¾ï¼š <img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/883caeccb3cb40b69a001ba88a8801ca~tplv-k3u1fbpfcp-watermark.image#?w=2746&amp;h=1622&amp;s=893926&amp;e=png&amp;b=f8f8f8" alt="æˆªå±2023-05-21 14.38.09.png"></p><h2 id="todo" tabindex="-1">TODO <a class="header-anchor" href="#todo" aria-label="Permalink to &quot;TODO&quot;">â€‹</a></h2><ul><li>[x] å®æ—¶çœ‹åˆ°é¢„è§ˆæ•ˆæœ</li><li>[x] å¢åŠ å›¾åƒ demo, æ”¯æŒè¾“å…¥å›¾ç‰‡ URLã€‚</li></ul><h2 id="å‚è€ƒ" tabindex="-1">å‚è€ƒ <a class="header-anchor" href="#å‚è€ƒ" aria-label="Permalink to &quot;å‚è€ƒ&quot;">â€‹</a></h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/ImageData" target="_blank" rel="noreferrer">ImageData</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLCanvasElement/toBlob" target="_blank" rel="noreferrer">toBlob</a></p><p><a href="https://juejin.cn/post/6973321414786940941" target="_blank" rel="noreferrer">æ‰‹æŠŠæ‰‹æ•™ä½ å®ç°ä¸€ä¸ªå›¾åƒå¤„ç†å°å·¥å…·</a></p><p><a href="https://github.com/hepengwei/visualization-collection" target="_blank" rel="noreferrer">visualization-collection</a></p><p><a href="https://www.shuangyi-tech.com/news_63.html" target="_blank" rel="noreferrer">å›¾åƒå¤„ç†ä¸­å¸¸ç”¨çš„å½©è‰²æ¨¡å‹</a></p></div></div></main><footer class="VPDocFooter" data-v-f07718f6 data-v-b3ad4321><!--[--><!--[--><!--[--><!--[--><!----><!--]--><!--]--><!--]--><!--]--><div class="edit-info" data-v-b3ad4321><!----><div class="last-updated" data-v-b3ad4321><p class="VPLastUpdated" data-v-b3ad4321 data-v-5d910210>æœ€åæ›´æ–°: <time datetime="2024-04-27T07:01:24.000Z" data-v-5d910210></time></p></div></div><nav class="prev-next" data-v-b3ad4321><div class="pager" data-v-b3ad4321><a class="VPLink link pager-link prev" href="/categories/note/2023/6/26/%E5%A6%82%E4%BD%95%E7%94%A8%20ffmpeg%20+%20canvas%20%E5%86%99%E4%B8%80%E4%B8%AA%E5%9C%A8%E7%BA%BF%E5%8F%AF%E8%A7%86%E5%8C%96%E9%9F%B3%E8%A7%86%E9%A2%91%E7%BC%96%E8%BE%91%E5%B7%A5%E5%85%B7" data-v-b3ad4321><!--[--><span class="desc" data-v-b3ad4321>ä¸Šä¸€ç¯‡</span><span class="title" data-v-b3ad4321><div class="text-color-orange mr-[6px]" style="font-weight: 550; display: inline-block;">2</div>å¦‚ä½•ç”¨ ffmpeg + canvas å†™ä¸€ä¸ªåœ¨çº¿å¯è§†åŒ–éŸ³è§†é¢‘ç¼–è¾‘å·¥å…·</span><!--]--></a></div><div class="pager" data-v-b3ad4321><a class="VPLink link pager-link next" href="/categories/note/2023/10/31/%E5%A6%82%E4%BD%95%E7%94%A8%20service%20worker%20%E5%A2%9E%E5%8A%A0%E5%93%8D%E5%BA%94%E4%BD%93%E7%9A%84%20header%20%E5%AD%97%E6%AE%B5" data-v-b3ad4321><!--[--><span class="desc" data-v-b3ad4321>ä¸‹ä¸€ç¯‡</span><span class="title" data-v-b3ad4321><div class="text-color-gray mr-[6px]" style="font-weight: 550; display: inline-block;">4</div>å¦‚ä½•ç”¨ service worker å¢åŠ å“åº”ä½“çš„ header å­—æ®µ</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"categories_issues_2024_04_27_free å›¾åºŠ.md\":\"2GG5C4tj\",\"categories_note_2023_10_31_å¦‚ä½•ç”¨ service worker å¢åŠ å“åº”ä½“çš„ header å­—æ®µ.md\":\"CyQL6c2p\",\"about_me.md\":\"CdxBobpc\",\"about_index.md\":\"DXj2a7p6\",\"categories_note_2023_03_22_canvas å®æˆ˜ - å¤´åƒç»„è£…ã€é¢œè‰²é€‰å–.md\":\"CUboaWWe\",\"archives.md\":\"B__MOfmV\",\"categories_issues_index.md\":\"Biv1TW-V\",\"categories_note_2024_01_7_å¦‚ä½•åœ¨å¾®ä¿¡å°ç¨‹åºä¸­æ‰¾åˆ°å¹¶åˆ é™¤æœªä½¿ç”¨çš„ç»„ä»¶.md\":\"57GooBdG\",\"categories_note_index.md\":\"CySlpch7\",\"index.md\":\"B5CaTbbQ\",\"courses_leetcode_index.md\":\"N9qZjmMu\",\"categories_note_2024_01_14_ä½¿ç”¨è¿œç¨‹è°ƒè¯•å·¥å…· pagespy æœ‰æ„Ÿ.md\":\"DfFkXBKn\",\"categories_note_2023_6_26_å¦‚ä½•ç”¨ ffmpeg _ canvas å†™ä¸€ä¸ªåœ¨çº¿å¯è§†åŒ–éŸ³è§†é¢‘ç¼–è¾‘å·¥å…·.md\":\"DJKft1hU\",\"categories_note_2023_5_21_web å›¾åƒå¤„ç† - ä»é›¶å®ç°ä¸€ä¸ªç…§ç‰‡ç¼–è¾‘å™¨.md\":\"BOZwX2FR\",\"categories_note_2023_04_12_ä»é›¶åˆ°ä¸€ä¸Šçº¿å°ç¨‹åº-ï¼ˆç››å”å¯†ç›’ï¼‰ç™¾ç§‘ç­”é¢˜ç±».md\":\"D4olZ817\",\"categories_note_2023_8_2_å°†web åº”ç”¨å¿«é€Ÿå°è£…æˆç§»åŠ¨ç«¯åº”ç”¨.md\":\"7oyR8F2Z\",\"categories_note_2024_01_26_å¦‚ä½•åœ¨å¾®ä¿¡å°ç¨‹åºä¸­æ‰¾åˆ°å¹¶åˆ é™¤æœªä½¿ç”¨çš„ç»„ä»¶.md\":\"D0wuKZLk\",\"tags.md\":\"p-ym85OE\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"çŸ¥è¯†åº“\",\"description\":\"ä¸ªäººæŠ€æœ¯çŸ¥è¯†åº“ï¼Œè®°å½• & åˆ†äº«ä¸ªäººç¢ç‰‡åŒ–ã€ç»“æ„åŒ–ã€ä½“ç³»åŒ–çš„æŠ€æœ¯çŸ¥è¯†å†…å®¹ã€‚\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"çŸ¥è¯†åº“\",\"items\":[{\"text\":\"æŠ€æœ¯ç¬”è®°\",\"link\":\"/categories/note/index\",\"activeMatch\":\"/categories/note/\"},{\"text\":\"ç¢ç¢å¿µ\",\"link\":\"/categories/issues/index\",\"activeMatch\":\"/categories/issues/\"}],\"activeMatch\":\"/categories/\"},{\"text\":\"åˆ·é¢˜\",\"items\":[{\"text\":\"leetCode top 100\",\"link\":\"/courses/leetcode/index\",\"activeMatch\":\"/courses/leetcode/\"}],\"activeMatch\":\"/courses/\"}],\"sidebar\":{\"/categories/note/\":[{\"text\":\"<img class=\\\"chinese-zodiac\\\" style=\\\"position: static; vertical-align: middle; padding-bottom: 3px;\\\" src=\\\"/img/svg/chinese-zodiac/dragon.svg\\\" title=\\\"é¾™å¹´\\\" alt=\\\"ç”Ÿè‚–\\\">\\n            2024å¹´ (3ç¯‡)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>å¦‚ä½•åœ¨å¾®ä¿¡å°ç¨‹åºä¸­æ‰¾åˆ°å¹¶åˆ é™¤æœªä½¿ç”¨çš„ç»„ä»¶\",\"link\":\"/categories/note/2024/01/7/å¦‚ä½•åœ¨å¾®ä¿¡å°ç¨‹åºä¸­æ‰¾åˆ°å¹¶åˆ é™¤æœªä½¿ç”¨çš„ç»„ä»¶\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>å¦‚ä½•åœ¨å¾®ä¿¡å°ç¨‹åºä¸­æ‰¾åˆ°å¹¶åˆ é™¤æœªä½¿ç”¨çš„ç»„ä»¶\",\"link\":\"/categories/note/2024/01/26/å¦‚ä½•åœ¨å¾®ä¿¡å°ç¨‹åºä¸­æ‰¾åˆ°å¹¶åˆ é™¤æœªä½¿ç”¨çš„ç»„ä»¶\"},{\"text\":\"<div class=\\\"text-color-yellow mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">3</div>ä½¿ç”¨è¿œç¨‹è°ƒè¯•å·¥å…· pageSpy æœ‰æ„Ÿ\",\"link\":\"/categories/note/2024/01/14/ä½¿ç”¨è¿œç¨‹è°ƒè¯•å·¥å…· pageSpy æœ‰æ„Ÿ\"}],\"collapsed\":false},{\"text\":\"<img class=\\\"chinese-zodiac\\\" style=\\\"position: static; vertical-align: middle; padding-bottom: 3px;\\\" src=\\\"/img/svg/chinese-zodiac/rabbit.svg\\\" title=\\\"å…”å¹´\\\" alt=\\\"ç”Ÿè‚–\\\">\\n            2023å¹´ (6ç¯‡)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>å°†web åº”ç”¨å¿«é€Ÿå°è£…æˆç§»åŠ¨ç«¯åº”ç”¨\",\"link\":\"/categories/note/2023/8/2/å°†web åº”ç”¨å¿«é€Ÿå°è£…æˆç§»åŠ¨ç«¯åº”ç”¨\"},{\"text\":\"<div class=\\\"text-color-orange mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">2</div>å¦‚ä½•ç”¨ ffmpeg + canvas å†™ä¸€ä¸ªåœ¨çº¿å¯è§†åŒ–éŸ³è§†é¢‘ç¼–è¾‘å·¥å…·\",\"link\":\"/categories/note/2023/6/26/å¦‚ä½•ç”¨ ffmpeg + canvas å†™ä¸€ä¸ªåœ¨çº¿å¯è§†åŒ–éŸ³è§†é¢‘ç¼–è¾‘å·¥å…·\"},{\"text\":\"<div class=\\\"text-color-yellow mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">3</div>web å›¾åƒå¤„ç† - ä»é›¶å®ç°ä¸€ä¸ªç…§ç‰‡ç¼–è¾‘å™¨\",\"link\":\"/categories/note/2023/5/21/web å›¾åƒå¤„ç† - ä»é›¶å®ç°ä¸€ä¸ªç…§ç‰‡ç¼–è¾‘å™¨\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">4</div>å¦‚ä½•ç”¨ service worker å¢åŠ å“åº”ä½“çš„ header å­—æ®µ\",\"link\":\"/categories/note/2023/10/31/å¦‚ä½•ç”¨ service worker å¢åŠ å“åº”ä½“çš„ header å­—æ®µ\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">5</div>ä»é›¶åˆ°ä¸€ä¸Šçº¿å°ç¨‹åº-ï¼ˆç››å”å¯†ç›’ï¼‰ç™¾ç§‘ç­”é¢˜ç±»\",\"link\":\"/categories/note/2023/04/12/ä»é›¶åˆ°ä¸€ä¸Šçº¿å°ç¨‹åº-ï¼ˆç››å”å¯†ç›’ï¼‰ç™¾ç§‘ç­”é¢˜ç±»\"},{\"text\":\"<div class=\\\"text-color-gray mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">6</div>canvas å®æˆ˜ - å¤´åƒç»„è£…ã€é¢œè‰²é€‰å–\",\"link\":\"/categories/note/2023/03/22/canvas å®æˆ˜ - å¤´åƒç»„è£…ã€é¢œè‰²é€‰å–\"}],\"collapsed\":true}],\"/categories/issues/\":[{\"text\":\"<img class=\\\"chinese-zodiac\\\" style=\\\"position: static; vertical-align: middle; padding-bottom: 3px;\\\" src=\\\"/img/svg/chinese-zodiac/dragon.svg\\\" title=\\\"é¾™å¹´\\\" alt=\\\"ç”Ÿè‚–\\\">\\n            2024å¹´ (1ç¯‡)\",\"items\":[{\"text\":\"<div class=\\\"text-color-red mr-[6px]\\\" style=\\\"font-weight: 550; display: inline-block;\\\">1</div>å›¾åºŠ\",\"link\":\"/categories/issues/2024/04/27/free å›¾åºŠ\"}],\"collapsed\":false}]},\"logo\":\"/logo.png\",\"outline\":{\"level\":\"deep\",\"label\":\"ç›®å½•\"},\"darkModeSwitchLabel\":\"åˆ‡æ¢æ—¥å…‰/æš—é»‘æ¨¡å¼\",\"sidebarMenuLabel\":\"æ–‡ç« \",\"returnToTopLabel\":\"è¿”å›é¡¶éƒ¨\",\"lastUpdatedText\":\"æœ€åæ›´æ–°\",\"docFooter\":{\"prev\":\"ä¸Šä¸€ç¯‡\",\"next\":\"ä¸‹ä¸€ç¯‡\"},\"search\":{\"provider\":\"algolia\",\"options\":{\"appId\":\"DBZ0G9HBUY\",\"apiKey\":\"00cef480a543003d05d9808110ea5f65\",\"indexName\":\"charles7c\",\"locales\":{\"root\":{\"placeholder\":\"æœç´¢æ–‡æ¡£\",\"translations\":{\"button\":{\"buttonText\":\"æœç´¢æ–‡æ¡£\",\"buttonAriaLabel\":\"æœç´¢æ–‡æ¡£\"},\"modal\":{\"searchBox\":{\"resetButtonTitle\":\"æ¸…é™¤æŸ¥è¯¢æ¡ä»¶\",\"resetButtonAriaLabel\":\"æ¸…é™¤æŸ¥è¯¢æ¡ä»¶\",\"cancelButtonText\":\"å–æ¶ˆ\",\"cancelButtonAriaLabel\":\"å–æ¶ˆ\"},\"startScreen\":{\"recentSearchesTitle\":\"æœç´¢å†å²\",\"noRecentSearchesText\":\"æ²¡æœ‰æœç´¢å†å²\",\"saveRecentSearchButtonTitle\":\"ä¿å­˜è‡³æœç´¢å†å²\",\"removeRecentSearchButtonTitle\":\"ä»æœç´¢å†å²ä¸­ç§»é™¤\",\"favoriteSearchesTitle\":\"æ”¶è—\",\"removeFavoriteSearchButtonTitle\":\"ä»æ”¶è—ä¸­ç§»é™¤\"},\"errorScreen\":{\"titleText\":\"æ— æ³•è·å–ç»“æœ\",\"helpText\":\"ä½ å¯èƒ½éœ€è¦æ£€æŸ¥ä½ çš„ç½‘ç»œè¿æ¥\"},\"footer\":{\"selectText\":\"é€‰æ‹©\",\"navigateText\":\"åˆ‡æ¢\",\"closeText\":\"å…³é—­\",\"searchByText\":\"æœç´¢æä¾›è€…\"},\"noResultsScreen\":{\"noResultsText\":\"æ— æ³•æ‰¾åˆ°ç›¸å…³ç»“æœ\",\"suggestedQueryText\":\"ä½ å¯ä»¥å°è¯•æŸ¥è¯¢\",\"reportMissingResultsText\":\"ä½ è®¤ä¸ºè¯¥æŸ¥è¯¢åº”è¯¥æœ‰ç»“æœï¼Ÿ\",\"reportMissingResultsLinkText\":\"ç‚¹å‡»åé¦ˆ\"}}}}}}},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/mamumu123/mamumu123.github.io\"}],\"articleMetadataConfig\":{\"author\":\"è·‘å ‚è·¯è¿‡\",\"authorLink\":\"/about/me\",\"showViewCount\":false},\"copyrightConfig\":{\"license\":\"ç½²å-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™… (CC BY-SA 4.0)\",\"licenseLink\":\"http://creativecommons.org/licenses/by-sa/4.0/\"},\"commentConfig\":{\"type\":\"gitalk\",\"showComment\":false},\"footerConfig\":{\"showFooter\":true}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>